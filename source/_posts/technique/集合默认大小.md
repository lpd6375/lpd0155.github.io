---
title: 集合默认大小
date: 2019-10-14 11:04:32
tags: 技术
keywords:
description:
---

这个是前天电话面试被问到了，之前是看了的，但是记得不是很清楚。今天又找到了一篇说这个的文章，这里抄下来，以便今后查阅。



<!--more-->



List 元素是有序的、可重复

ArrayList、Vector默认初始容量为10

Vector：线程安全，但速度慢

　　　　底层数据结构是数组结构

　　　　加载因子为1：即当 元素个数 超过 容量长度 时，进行扩容

　　　　扩容增量：原容量的 1倍

　　　　　　如 Vector的容量为10，一次扩容后是容量为20

ArrayList：线程不安全，查询速度快

　　　　底层数据结构是数组结构

　　　　扩容增量：原容量的 1.5倍

　　　　　　如 ArrayList的容量为10，一次扩容后是容量为15

见ArrayList源码:

```java
private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;   // 原来的容量
    int newCapacity = oldCapacity + (oldCapacity >> 1);  // 新的容量，原来容量的1.5倍。
    if (newCapacity - minCapacity < 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE > 0)  // 如果大于ArrayList 可以容许的最大容量，则设置为最大容量。
        newCapacity = hugeCapacity(minCapacity);
    // minCapacity is usually close to size, so this is a win:
    elementData = Arrays.copyOf(elementData, newCapacity);  // 最终利用Arrays.coppy 进行扩容，生成一个1.5倍元素的数组。（即例子中的15个元素的数组。）
}
```

Set(集) 元素无序的、不可重复。

HashSet：线程不安全，存取速度快

　　　　　底层实现是一个HashMap（保存数据），实现Set接口

　　　　　默认初始容量为16（为何是16，见下方对HashMap的描述）

　　　　　加载因子为0.75：即当 元素个数 超过 容量长度的0.75倍 时，进行扩容

　　　　　扩容增量：原容量的 1 倍

　　　　　　如 HashSet的容量为16，一次扩容后是容量为32

 

Map是一个双列集合

HashMap：默认初始容量为16

　　　　　（为何是16：16是2^4，可以提高查询效率，另外，32=16<<1       -->至于详细的原因可另行分析，或分析源代码）

　　　　　加载因子为0.75：即当 元素个数 超过 容量长度的0.75倍 时，进行扩容

　　　　　扩容增量：原容量的 1 倍

　　　　　　如 HashSet的容量为16，一次扩容后是容量为32
